issue_id,description,file,line_suspect,repro_steps,root_cause_hypothesis,proposed_fix,priority
FISCAL-001,GDP value used in calculations not documented or saved to output,"fiscal/fiscal_analysis.py","30, 989, 1112","1. Run fiscal_analysis.py\n2. Check Annual_Impulse_Pct_GDP value\n3. Reverse-calculate implied GDP\n4. Compare to NOMINAL_GDP_FALLBACK constant","fetch_current_gdp() fetches $30.5T from FRED and estimates forward to $31.7T based on QoQ growth, but this GDP is not saved to CSV or shown prominently in report. Users see %GDP metrics without knowing the denominator.","Add columns to fiscal_daily_metrics: 'gdp_used_usd', 'gdp_source', 'gdp_reference_date', 'gdp_estimated'. Update report header to show GDP value and estimation status.",HIGH
FISCAL-002,Net Liquidity and RRP have 33% NULL values in recent 100 records,"fed/fed_liquidity.py","N/A (data fetch issue)","1. Query database/treasury_data.duckdb\n2. SELECT record_date, RRP_Balance, Net_Liquidity FROM fed_liquidity_daily ORDER BY record_date DESC LIMIT 100\n3. Count NULLs\n4. Observe pattern on weekends/holidays","Fed RRP data not published on weekends/holidays. No forward-fill or imputation implemented. When RRP_Balance is NULL, Net_Liquidity calculation fails, leaving gaps.","Implement forward-fill for RRP_Balance on non-trading days. Add 'rrp_imputed' and 'net_liq_imputed' boolean flags to indicate imputed values. Recalculate Net_Liquidity with imputed RRP.",HIGH
FISCAL-003,household_share column not saved to fiscal_daily_metrics table or CSV,"fiscal/fiscal_analysis.py","1149 (report only)","1. Query: SELECT * FROM fiscal_daily_metrics WHERE record_date = '2025-11-24'\n2. Check column list\n3. Note absence of household_share column\n4. Compare to report display which shows household share calculation","Household share calculated in generate_report() line 1149 for display, but not during process_fiscal_analysis() where other derived metrics are calculated. Never persisted to database.","Add calculation in process_fiscal_analysis() after line 903: merged['household_share_pct'] = (merged['Household_Spending'] / merged['Total_Spending'] * 100).fillna(0). Add validation: assert (merged['household_share_pct'] >= 0).all().",HIGH
FISCAL-004,GDP normalization formula lacks inline unit documentation,"fiscal/fiscal_analysis.py","986, 989","1. Read fiscal_analysis.py lines 983-990\n2. Note formula: (MA20_Net_Impulse * 252 * 1_000_000) / nominal_gdp * 100\n3. Observe no comments explaining why MA20 (in Millions) is multiplied by 1M","Formula is mathematically correct (MA20 in Millions × 1M → USD, then ÷ GDP in USD), but lacks comments explaining unit conversions. Could lead to confusion or incorrect modifications.","Add inline comments:\n# GDP NORMALIZATION - Convert to USD for consistency\n# MA20_Net_Impulse is in Millions, nominal_gdp from FRED is in USD\n# Formula: (MA20_M × 1,000,000 to_USD × 252 days/year) / GDP_USD × 100",MEDIUM
FISCAL-005,Reconciliation check (sliding vs block 4W) not automated or persisted,"fiscal/fiscal_analysis.py","708-775","1. Run fiscal_analysis.py\n2. Check fiscal_daily_metrics for reconciliation delta column\n3. Note absence of automated tracking\n4. Observe reconciliation only runs in generate_report()","perform_reconciliation_check() runs only during report generation, not as part of daily metrics. No historical tracking of reconciliation delta or automated alerting on tolerance violations.","Add to process_fiscal_analysis(): merged['4W_reconciliation_delta'] = merged['4W_Cum_Net'] - block_4w_net. merged['4W_reconciliation_flag'] = abs(delta) > 10000. Add alert in report if any recent flags.",MEDIUM
FISCAL-006,TGA_Balance also has NULL values (1% of recent records),"fed/fed_liquidity.py","N/A","1. Query: SELECT record_date, TGA_Balance FROM fed_liquidity_daily WHERE TGA_Balance IS NULL ORDER BY record_date DESC LIMIT 10\n2. Example: 2025-11-28 has NULL TGA","TGA data occasionally missing from source. Less frequent than RRP NULLs but still breaks Net_Liquidity calculation.","Implement forward-fill for TGA_Balance as well. Add 'tga_imputed' flag. Ensure TGA imputation uses last valid value, not zero.",LOW
FISCAL-007,Net Liquidity calculation perfect when data available (verified),"N/A","N/A","1. Query non-NULL records from fed_liquidity_daily\n2. Manually calculate: Fed_Total_Assets - (RRP_Balance × 1000) - TGA_Balance\n3. Compare to Net_Liquidity column\n4. Verified: All 5 tested records match exactly (diff=0M)","✅ NO ISSUE - Net Liquidity formula is correctly implemented. RRP_Balance in Billions correctly converted to Millions before calculation.",N/A - This is a PASS result. No fix needed.,INFO
FISCAL-008,4-week cumulative (sliding 20 BD) calculation verified correct,"fiscal/fiscal_analysis.py","974","1. Manually calculate sum of last 20 Net_Impulse values\n2. Compare to 4W_Cum_Net in output\n3. Verified perfect match on test date 2025-11-24: $243,449M","✅ NO ISSUE - Rolling window=20 correctly implements 4-week (20 business day) sliding cumulative.",N/A - This is a PASS result. No fix needed.,INFO
FISCAL-009,YoY calculations using shift(252) verified correct for business day alignment,"fiscal/fiscal_analysis.py","996-1002","1. Check shift(252) for YoY comparisons\n2. Validate against Fiscal Week #44 methodology\n3. Confirmed: shift(252) aligns business days, not calendar days","✅ NO ISSUE - shift(252) correctly aligns YoY comparisons on business days (252 trading days per year).",N/A - This is a PASS result. No fix needed.,INFO
FISCAL-010,Weekly aggregation Wed-Wed alignment verified correct,"fiscal/fiscal_analysis.py","802-849","1. Check fiscal_weekly_metrics for week boundaries\n2. Example: week starting 2025-11-19 runs Wed→Tue\n3. Confirmed via get_fiscal_week_bounds() implementation","✅ NO ISSUE - Fiscal week Wed-Wed alignment correctly implemented via get_fiscal_week_bounds().",N/A - This is a PASS result. No fix needed.,INFO
FISCAL-011,Category mapping comprehensive and well-structured,"fiscal/fiscal_analysis.py","53-237","1. Review SPENDING_CATEGORIES and TAX_CATEGORIES dictionaries\n2. Check coverage of major fiscal categories\n3. Note 20+ spending categories, 7 tax categories","✅ NO ISSUE - Category mapping is comprehensive. Includes household-directed, interest, defense, transfer programs, etc. Properly handles exclusions.",N/A - This is a PASS result. No fix needed.,INFO
FISCAL-012,GDP implied from reported %GDP values shows ~$31.7T (9.3% higher than $29T fallback),"fiscal/fiscal_analysis.py","30, 989","1. Take sample: MA20_Net_Impulse = 12,172.45M, Annual % = 9.68%\n2. Reverse-calculate: GDP = (12172.45 × 252 × 1M × 100) / 9.68 = $31.7T\n3. Compare to NOMINAL_GDP_FALLBACK = $29T\n4. Discrepancy: +9.3%","GDP fetched from FRED is $30.5T (Q4 2024). fetch_current_gdp() estimates forward to ~$31.7T using QoQ growth (0.81%) extrapolation because data is 235 days old. This estimated value used in all %GDP calculations but not documented.","Same fix as FISCAL-001: Document GDP in output and report. Consider adding GDP update frequency check and warning if extrapolation exceeds certain threshold (e.g., >3 quarters old).",HIGH
FISCAL-013,Weekly_Impulse_Pct_GDP and Annual_Impulse_Pct_GDP internally consistent but use higher GDP,"fiscal/fiscal_analysis.py","986, 989","1. Check both weekly and annual %GDP for same date\n2. Verify both use same GDP value\n3. Confirmed: Both calculations consistent (31.7T implied from both)\n4. Issue: Both understated if users expect $29T baseline","Both formulas use same estimated GDP (~$31.7T), so ratios between weekly/annual are correct. However, absolute %GDP values are ~9% lower than they would be with $29T baseline.","Same fix as FISCAL-001. Add GDP sensitivity analysis to report showing impact of ±1% GDP change on %GDP metrics.",MEDIUM
FISCAL-014,Daily records show negative Net_Impulse (fiscal drag days) handled correctly,"fiscal/fiscal_analysis.py","948","1. Check 2025-11-24: Net_Impulse = -15,570M (taxes > spending)\n2. Verify downstream calculations don't break\n3. Confirmed: YoY, MA20, all metrics handle negative correctly","✅ NO ISSUE - Negative Net_Impulse (fiscal drag) days handled correctly. Formula household_spending / total_spending remains valid [0-100%] even when net is negative.",N/A - This is a PASS result. No fix needed.,INFO
